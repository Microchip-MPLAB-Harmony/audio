<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<title>DSP_FilterFIR32 Function</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoadEx('frames.html', 'topic', '00442.html');" onmousedown="onBodyMouseDown();">

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="00651.html" target="topic">Math Libraries Help</a> &gt; <a href="00638.html" target="topic">DSP</a> &gt; <a href="00648.html" target="topic">Library Interface</a> &gt; Functions &gt; <a href="00442.html" target="topic">DSP_FilterFIR32 Function</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Audio Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00158.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="00441.html" target="topic">Previous</a> | <a href="00648.html" target="topic">Up</a> | <a href="00443.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DSP_FilterFIR32@int32_t *@int32_t *@int32_t *@int32_t *@int@int@int Topic Title: DSP_FilterFIR32 Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table><div class="Element5">
DSP_FilterFIR32 Function</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<a name="PageContent"></a><div class="Element58">
<a name="53756D6D617279"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
Performs a Finite Infinite Response (FIR) filter on a vector.</p></div>
</div>
<a name="4465736372697074696F6E"></a><div class="Element14">
Description</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
Function DSP_FilterFIR32:&nbsp;</p>
<p class="Element10">
void DSP_FilterFIR32(int32_t *outdata, int32_t *indata, int32_t *coeffs2x, int32_t *delayline, int N, int K, int scale);&nbsp;</p>
<p class="Element10">
Performs an FIR filter on the vector indata, and stores the output in the vector outdata. The number of samples processed in the array is given by N. The number of filter taps is given by K. The values are scaled upon input by the binary scaling factor (right shift), scale. The array of 2*K coefficients is contained in the array coeffs2x, where the values are in order b0, b1, b2... and repeated. Lastly the delayline is an array of K values that are initialized to zero and represent previous values. All values are in fractional Q31 data format. The function will saturate results if minimum or maximum values are exceeded.</p></div>
</div>
<a name="507265636F6E646974696F6E73"></a><div class="Element14">
Preconditions</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
The pointers outdata and indata must be aligned on 4-byte boundaries. N must be greater than or equal to four and a multiple of four. K must be greater than 2 and a multiple of 2. delayline must have K elements, and be initialized to zero. coeffs2x must have 2*K elements.</p></div>
</div>
<a name="506172616D6574657273"></a><div class="Element14">
Parameters</div>
<div class="Element11">
<div class="Element10">
<div class="Element312">
<div class="TableDiv">
<table cellspacing="0" class="Table3">
<tr>
<td class="Element300" valign="top" width="35%">
<div class="Element301">
Parameters&nbsp;</div></td><td class="Element304" valign="top" width="65%">
<div class="Element305">
Description&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
outdata&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
pointer to destination array of elements (int32_t)&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
indata&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
pointer to source array of elements (int32_t)&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
coeffs2x&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
pointer to an array of coefficients (int32_t)&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
delayline&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
pointer to an array of delay variables (int32_t)&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
N&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
number of points in the array to process (int) number of samples (int)&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
K&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
number of filter taps&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
scale&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
binary scaler divisor (1 / 2^scale) (int)&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="52657475726E73"></a><div class="Element14">
Returns</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
None.</p></div>
</div>
<a name="4578616D706C65"></a><div class="Element14">
Example</div>
<div class="Element11">
<div class="Element10">
<div class="Element13"><div class="Element12"><pre class="Element12">
<strong><span style="color: #000080">#define</span></strong> TAPS 4
<strong><span style="color: #000080">#define</span></strong> numPOINTS 256

<strong><span style="color: #000080">int</span></strong> filterN = numPOINTS;
<strong><span style="color: #000080">int</span></strong> filterK = TAPS;
<strong><span style="color: #000080">int</span></strong> filterScale = 1;  <i><span style="color: #008000">// scale output by 1/2^1 =&gt; output * 0.5</span></i>
int32_t FilterCoefs[TAPS*2] = {0x40000000, 0x20000000, 0x20000000, 0x20000000,
            0x40000000, 0x20000000, 0x20000000, 0x20000000};
<i><span style="color: #008000">// note repeated filter coefs, A B C D A B C D</span></i>
<i><span style="color: #008000">//             0.5, 0.25, 0.25, 0.25, 0.5, 0.25, 0.25, 0.25</span></i>

int32_t outFilterData[numPOINTS]={0};
int32_t inFilterData[numPOINTS];
<strong><span style="color: #000080">int</span></strong> filterDelayLine[TAPS]={0};

<strong><span style="color: #000080">while</span></strong>(<strong><span style="color: #000080">true</span></strong>)
{

<i><span style="color: #008000">//   put some data into input array, inFilterData, here //</span></i>

DSP_FilterFIR32(outFilterData, inFilterData, FilterCoefs, filterDelayLine,
            filterN, filterK, filterScale);
}
</pre></div></div>
</div>
</div>
<a name="52656D61726B73"></a><div class="Element14">
Remarks</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
Filter coefs must be repeated within the array. The array is twice as large as the number of taps, and the values are repeated in order b0, b1, b2,...bn, b0, b1, b2,... bn. The function updates the delayline array, which must be K elements long. The array should be initialized to zero prior to the first processing. It will contain values for processing cascaded filters within a loop.</p></div>
</div>
<a name="43"></a><div class="Element99">
C</div>
<div class="Element101"><div class="Element100"><pre class="Element100"><strong><span style="color: #000080">void</span></strong> <strong><span style="color: #000000">DSP_FilterFIR32</span></strong>(
    int32_t * <strong><span style="color: #000000">outdata</span></strong>, 
    int32_t * <strong><span style="color: #000000">indata</span></strong>, 
    int32_t * <strong><span style="color: #000000">coeffs2x</span></strong>, 
    int32_t * <strong><span style="color: #000000">delayline</span></strong>, 
    <strong><span style="color: #000080">int</span></strong> <strong><span style="color: #000000">N</span></strong>, 
    <strong><span style="color: #000080">int</span></strong> <strong><span style="color: #000000">K</span></strong>, 
    <strong><span style="color: #000080">int</span></strong> <strong><span style="color: #000000">scale</span></strong>
);</pre></div></div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="00651.html" target="topic">Math Libraries Help</a> &gt; <a href="00638.html" target="topic">DSP</a> &gt; <a href="00648.html" target="topic">Library Interface</a> &gt; Functions &gt; <a href="00442.html" target="topic">DSP_FilterFIR32 Function</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element3">
MPLAB Harmony Audio Help</div>
</td><td width="25%">
<div class="Element4">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00158.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element91">
<a href="00441.html" target="topic">Previous</a> | <a href="00648.html" target="topic">Up</a> | <a href="00443.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DSP_FilterFIR32@int32_t *@int32_t *@int32_t *@int32_t *@int@int@int Topic Title: DSP_FilterFIR32 Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>